### Registro de usuario (doctor)
# @name register_doctor
POST http://localhost:3001/api/auth/register
Content-Type: application/json

{
  "email": "doctor@mail.com",
  "password": "123456",
  "role": "doctor"
}

### Login como doctor
# @name login_doctor
POST http://localhost:3001/api/auth/login
Content-Type: application/json

{
  "email": "doctor@mail.com",
  "password": "123456"
}

### Token doctor guardado en variable global
@token_doctor = {{login_doctor.response.body.token}}

### Endpoint protegido (doctor)
GET http://localhost:3001/api/protected
Authorization: Bearer {{token_doctor}}

### Obtener todos los horarios de consulta (doctor)
GET http://localhost:3001/api/doctor-consultation-hours
Authorization: Bearer {{token_doctor}}

### Crear horario de consulta (doctor)
POST http://localhost:3001/api/doctor-consultation-hours
Content-Type: application/json
Authorization: Bearer {{token_doctor}}

{
  "doctor_id": 200001,
  "day_of_week": "Martes",
  "start_time": "09:00",
  "end_time": "11:00"
}

### Actualizar horario de consulta (doctor)
PUT http://localhost:3001/api/doctor-consultation-hours/1
Content-Type: application/json
Authorization: Bearer {{token_doctor}}

{
  "doctor_id": 200001,
  "day_of_week": "Lunes",
  "start_time": "12:00",
  "end_time": "14:00"
}

### Crear paciente con persona de referencia
POST http://localhost:3001/api/patients/register
Content-Type: application/json
Authorization: Bearer {{token_doctor}}

{
  "first_name": "Lucía",
  "last_name": "Martínez",
  "date_of_birth": "1992-03-15",
  "address": "Av. Central 456",
  "phone": "444555666",
  "email": "lucia.martinez@mail.com",
  "password": "123456",
  "preferred_payment_methods": "efectivo",
  "health_insurance_id": null,
  "reference_person": {
    "name": "Sofía",
    "last_name": "Martínez",
    "address": "Av. Central 456",
    "phone": "444555667",
    "relationship": "Hermana"
  }
}

### Consultar todos los pacientes (doctor)
GET http://localhost:3001/api/patients
Authorization: Bearer {{token_doctor}}

### Consultar paciente por ID (doctor)
GET http://localhost:3001/api/patients/100001
Authorization: Bearer {{token_doctor}}

### Actualizar persona de referencia de un paciente (doctor)
PUT http://localhost:3001/api/patients/100001
Content-Type: application/json
Authorization: Bearer {{token_doctor}}

{
  "reference_person": {
    "name": "Pedro",
    "last_name": "Martínez",
    "address": "Av. Central 789",
    "phone": "444555668",
    "relationship": "Padre"
  }
}

### Agregar persona de referencia a un paciente
POST http://localhost:3001/api/patient-references/100003
Content-Type: application/json
Authorization: Bearer {{token_doctor}}

{
  "dni": "34567890",
  "name": "Sofía",
  "last_name": "Martínez",
  "address": "Av. Central 456",
  "phone": "444555667",
  "relationship": "Hermana"
}

### Listar personas de referencia de un paciente
GET http://localhost:3001/api/patient-references/100003
Authorization: Bearer {{token_doctor}}

### Actualizar persona de referencia
PUT http://localhost:3001/api/patient-references/100003/3
Content-Type: application/json
Authorization: Bearer {{token_doctor}}

{
  "dni": "34567890",
  "name": "Sofía",
  "last_name": "Martínez",
  "address": "Av. Central 456",
  "phone": "444555668",
  "relationship": "Hermana actualizada"
}

### Eliminar persona de referencia
DELETE http://localhost:3001/api/patient-references/100003/3
Authorization: Bearer {{token_doctor}}

### Actualizar medicamento de historial médico
PUT http://localhost:3001/api/medical-history/700001/prescribed-meds/930001
Content-Type: application/json
Authorization: Bearer {{token_doctor}}

{
  "medication_name": "Losartán",
  "dose": "100mg",
  "instructions": "1 comprimido diario"
}

### Eliminar medicamento de historial médico
DELETE http://localhost:3001/api/medical-history/700001/prescribed-meds/930001
Authorization: Bearer {{token_doctor}} 