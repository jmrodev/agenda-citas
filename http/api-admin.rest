### Registro de usuario (admin)
# @name register_admin
POST http://localhost:3001/api/auth/register
Content-Type: application/json

{
  "email": "admin@mail.com",
  "password": "123456",
  "role": "admin"
}

### Login como admin
# @name login_admin
POST http://localhost:3001/api/auth/login
Content-Type: application/json

{
  "email": "admin@mail.com",
  "password": "123456"
}

### Token admin guardado en variable global
@token_admin = {{login_admin.response.body.token}}

### Endpoint protegido (admin)
GET http://localhost:3001/api/protected
Authorization: Bearer {{token_admin}}

### Obtener todos los horarios de consulta (admin)
GET http://localhost:3001/api/doctor-consultation-hours
Authorization: Bearer {{token_admin}}

### Crear horario de consulta como admin
POST http://localhost:3001/api/doctor-consultation-hours
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "doctor_id": 200001,
  "day_of_week": "Viernes",
  "start_time": "08:00",
  "end_time": "10:00"
}

### Eliminar horario de consulta como admin
DELETE http://localhost:3001/api/doctor-consultation-hours/1
Authorization: Bearer {{token_admin}}

### Crear paciente con persona de referencia
POST http://localhost:3001/api/patients/register
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "first_name": "Juan",
  "last_name": "Pérez",
  "date_of_birth": "1990-01-01",
  "address": "Calle Falsa 123",
  "phone": "123456789",
  "email": "juan.perez@mail.com",
  "password": "123456",
  "preferred_payment_methods": "efectivo",
  "health_insurance_id": null,
  "reference_person": {
    "name": "María",
    "last_name": "Gómez",
    "address": "Calle Real 456",
    "phone": "987654321",
    "relationship": "Madre"
  }
}

### Consultar todos los pacientes (admin)
GET http://localhost:3001/api/patients
Authorization: Bearer {{token_admin}}

### Consultar paciente por ID (admin)
GET http://localhost:3001/api/patients/100001
Authorization: Bearer {{token_admin}}

### Actualizar persona de referencia de un paciente (admin)
PUT http://localhost:3001/api/patients/100001
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "reference_person": {
    "name": "Laura",
    "last_name": "Pérez",
    "address": "Calle Nueva 123",
    "phone": "51222",
    "relationship": "Tía"
  }
}

### Agregar persona de referencia a un paciente
POST http://localhost:3001/api/patient-references/100001
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "dni": "12345678",
  "name": "Laura",
  "last_name": "Pérez",
  "address": "Calle Nueva 123",
  "phone": "555111222",
  "relationship": "Tía"
}

### Listar personas de referencia de un paciente
GET http://localhost:3001/api/patient-references/100001
Authorization: Bearer {{token_admin}}

### Actualizar persona de referencia
PUT http://localhost:3001/api/patient-references/100001/1
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "dni": "12345678",
  "name": "Laura",
  "last_name": "Pérez",
  "address": "Calle Nueva 999",
  "phone": "555111223",
  "relationship": "Tía actualizada"
}

### Eliminar persona de referencia
DELETE http://localhost:3001/api/patient-references/100001/1
Authorization: Bearer {{token_admin}}

### Actualizar medicamento de receta
PUT http://localhost:3001/api/prescriptions/500001/medications/920001
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "medication_name": "Enalapril",
  "dose": "20mg",
  "instructions": "1 comprimido cada 8h"
}

### Eliminar medicamento de receta
DELETE http://localhost:3001/api/prescriptions/500001/medications/920001
Authorization: Bearer {{token_admin}}

### Actualizar pago de doctor
PUT http://localhost:3001/api/facility-payments/200001/payments/600001
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "payment_period": "Julio 2024",
  "hours_used": 12,
  "hourly_rate": 1100.00,
  "total_amount": 13200.00
}

### Eliminar pago de doctor
DELETE http://localhost:3001/api/facility-payments/200001/payments/600001
Authorization: Bearer {{token_admin}}

### Actualizar medicamento de historial médico
PUT http://localhost:3001/api/medical-history/700001/prescribed-meds/930001
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "medication_name": "Losartán",
  "dose": "100mg",
  "instructions": "1 comprimido diario"
}

### Eliminar medicamento de historial médico
DELETE http://localhost:3001/api/medical-history/700001/prescribed-meds/930001
Authorization: Bearer {{token_admin}} 